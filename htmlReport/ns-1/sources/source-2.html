


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=x-windows-950"> 
  <title>Coverage Report > Game</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.kingyu.flappybird.app</a>
</div>

<h1>Coverage Summary for Class: Game (com.kingyu.flappybird.app)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Game</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (9/9)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    95.1%
  </span>
  <span class="absValue">
    (39/41)
  </span>
</td>
</tr>
  <tr>
    <td class="name">Game$1</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">Game$BirdKeyListener</td>
<td class="coverageStat">
  <span class="percent">
    75%
  </span>
  <span class="absValue">
    (3/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    93.8%
  </span>
  <span class="absValue">
    (15/16)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    86.7%
  </span>
  <span class="absValue">
    (13/15)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    93.2%
  </span>
  <span class="absValue">
    (55/59)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.kingyu.flappybird.app;
&nbsp;
&nbsp;import com.kingyu.flappybird.component.GameElementLayer;
&nbsp;import com.kingyu.flappybird.component.Bird;
&nbsp;import com.kingyu.flappybird.component.GameBackground;
&nbsp;import com.kingyu.flappybird.component.GameForeground;
&nbsp;import com.kingyu.flappybird.component.WelcomeAnimation;
&nbsp;
&nbsp;import static com.kingyu.flappybird.util.Constant.*;
&nbsp;
&nbsp;import java.awt.Frame;
&nbsp;import java.awt.Graphics;
&nbsp;import java.awt.event.*;
&nbsp;import java.awt.image.BufferedImage;
&nbsp;
&nbsp;/**
&nbsp; * 村?D^A恨z村??ンM怠f?
&nbsp; *
&nbsp; * @author Kingyu
&nbsp; */
<b class="fc">&nbsp;public class Game extends Frame {</b>
&nbsp;    private static final long serialVersionUID = 1L; // O━华涵莓e┦
&nbsp;
&nbsp;    private static int gameState; // 村???
&nbsp;    public static final int GAME_READY = 0; // 村?ゼ?l
&nbsp;    public static final int GAME_START = 1; // 村??l
&nbsp;    public static final int STATE_OVER = 2; // 村??
&nbsp;
&nbsp;    private GameBackground background; // 村?I春?H
&nbsp;    private GameForeground foreground; // 村?e春?H
&nbsp;    private Bird bird; // p??H
&nbsp;    private GameElementLayer gameElement; // 村?じ?H
&nbsp;    private WelcomeAnimation welcomeAnimation; // 村?ゼ?l??H
&nbsp;    private boolean silentMode; // ?q家Α]???ㄏノ^
&nbsp;
&nbsp;    // b疼y竟い飑lて
<b class="fc">&nbsp;    public Game(boolean silentMode) {</b>
<b class="fc">&nbsp;        this.silentMode = silentMode;</b>
<b class="fc">&nbsp;        if (!silentMode) {</b>
<b class="fc">&nbsp;            initFrame(); // 飑lて村?怠f</b>
<b class="fc">&nbsp;            setVisible(true); // 怠fq??ぃi?A?m?i?</b>
&nbsp;        }
<b class="fc">&nbsp;        initGame(); // 飑lて村??H</b>
&nbsp;    }
&nbsp;
&nbsp;    // 飑lて村?怠f
&nbsp;    private void initFrame() {
<b class="fc">&nbsp;        setSize(FRAME_WIDTH, FRAME_HEIGHT); // ?m怠fjp</b>
<b class="fc">&nbsp;        setTitle(GAME_TITLE); // ?m怠f??</b>
<b class="fc">&nbsp;        setLocation(FRAME_X, FRAME_Y); // 怠f飑l旄m</b>
<b class="fc">&nbsp;        setResizable(false); // ?m怠fjpぃi?</b>
&nbsp;        // K[??怠fㄆン
<b class="fc">&nbsp;        addWindowListener(new WindowAdapter() {</b>
&nbsp;            @Override
&nbsp;            public void windowClosing(WindowEvent e) {
<b class="nc">&nbsp;                System.exit(0); // ?舻{</b>
&nbsp;            }
&nbsp;        });
<b class="fc">&nbsp;        addKeyListener(new BirdKeyListener()); // K[??v</b>
&nbsp;    }
&nbsp;
&nbsp;    // ノ_钡Μ?ㄆン?H?场?
<b class="fc">&nbsp;    class BirdKeyListener implements KeyListener {</b>
&nbsp;        public void keyPressed(KeyEvent e) {
<b class="fc">&nbsp;            int keycode = e.getKeyCode();</b>
<b class="fc">&nbsp;            switch (gameState) {</b>
&nbsp;                case GAME_READY:
<b class="fc">&nbsp;                    if (keycode == KeyEvent.VK_SPACE) {</b>
<b class="fc">&nbsp;                        bird.birdFlap();</b>
<b class="fc">&nbsp;                        bird.birdFall();</b>
<b class="fc">&nbsp;                        setGameState(GAME_START);</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case GAME_START:
<b class="fc">&nbsp;                    if (keycode == KeyEvent.VK_SPACE) {</b>
<b class="fc">&nbsp;                        bird.birdFlap();</b>
<b class="fc">&nbsp;                        bird.birdFall();</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case STATE_OVER:
<b class="fc">&nbsp;                    if (keycode == KeyEvent.VK_SPACE) {</b>
<b class="fc">&nbsp;                        resetGame();</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        public void keyReleased(KeyEvent e) {
<b class="fc">&nbsp;            int keycode = e.getKeyChar();</b>
<b class="fc">&nbsp;            if (keycode == KeyEvent.VK_SPACE) {</b>
<b class="fc">&nbsp;                bird.keyReleased();</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        public void keyTyped(KeyEvent e) {
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    // 飑lて村?い害U??H
&nbsp;   void initGame() {
<b class="fc">&nbsp;        background = new GameBackground();</b>
<b class="fc">&nbsp;        gameElement = new GameElementLayer();</b>
<b class="fc">&nbsp;        foreground = new GameForeground();</b>
<b class="fc">&nbsp;        welcomeAnimation = new WelcomeAnimation();</b>
<b class="fc">&nbsp;        bird = new Bird();</b>
<b class="fc">&nbsp;        setGameState(GAME_READY);</b>
&nbsp;
<b class="fc">&nbsp;        if (!silentMode) {</b>
<b class="fc">&nbsp;            new Thread(() -&gt; {</b>
&nbsp;                while (true) {
<b class="fc">&nbsp;                    repaint();</b>
&nbsp;                    try {
<b class="fc">&nbsp;                        Thread.sleep(FPS);</b>
<b class="nc">&nbsp;                    } catch (InterruptedException e) {</b>
<b class="nc">&nbsp;                        e.printStackTrace();</b>
<b class="fc">&nbsp;                    }</b>
&nbsp;                }
<b class="fc">&nbsp;            }).start();</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    // m村?
&nbsp;    public void resetGame() {
<b class="fc">&nbsp;        setGameState(GAME_READY);</b>
<b class="fc">&nbsp;        gameElement.reset();</b>
<b class="fc">&nbsp;        bird.reset();</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    private final BufferedImage bufImg = new BufferedImage(FRAME_WIDTH, FRAME_HEIGHT, BufferedImage.TYPE_4BYTE_ABGR);</b>
&nbsp;
&nbsp;    public void update(Graphics g) {
<b class="fc">&nbsp;        Graphics bufG = bufImg.getGraphics();</b>
<b class="fc">&nbsp;        background.draw(bufG, bird);</b>
<b class="fc">&nbsp;        foreground.draw(bufG, bird);</b>
<b class="fc">&nbsp;        if (gameState == GAME_READY) {</b>
<b class="fc">&nbsp;            welcomeAnimation.draw(bufG);</b>
&nbsp;        } else {
<b class="fc">&nbsp;            gameElement.draw(bufG, bird);</b>
&nbsp;        }
<b class="fc">&nbsp;        bird.draw(bufG);</b>
<b class="fc">&nbsp;        g.drawImage(bufImg, 0, 0, null);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static void setGameState(int gameState) {
<b class="fc">&nbsp;        Game.gameState = gameState;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int getGameState() {
<b class="fc">&nbsp;        return gameState;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-12-18 20:47</div>
</div>
</body>
</html>
